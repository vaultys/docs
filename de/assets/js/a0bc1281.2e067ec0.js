(self.webpackChunksmartlink_doc=self.webpackChunksmartlink_doc||[]).push([[2421],{51535:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>m,default:()=>v,frontMatter:()=>h,metadata:()=>f,toc:()=>g});var r=n(86070),s=n(62907),a=n(82846),o=n(86317),i=n(30758),c=n(3866),l=n(58359);function d(e){let{did:t}=e;const[n,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(),c=(0,i.useRef)(null);(0,i.useEffect)((()=>{s(JSON.parse(localStorage.getItem("messages")??"[]"))}),[]),(0,i.useEffect)((()=>{(()=>{const e=c.current;e&&(e.scrollTop=e.scrollHeight)})()}),[n]);const d=()=>{if(!a)return;o("");const e={date:Date.now(),message:a,did:t};localStorage.setItem("messages",JSON.stringify([...n,e])),s([...n,e])};return(0,r.jsxs)("div",{className:"h-[600px] bg-light dark:bg-dark p-2 rounded-lg flex flex-col gap-4 overflow-hidden",children:[(0,r.jsx)("h2",{children:"Messages"}),(0,r.jsx)("div",{className:"flex flex-col gap-2 flex-grow overflow-auto max-w-full",ref:c,children:n.map((e=>(0,r.jsx)("div",{className:""+(e.did===t?"pl-12":"pr-12"),children:(0,r.jsxs)("div",{className:"w-max max-w-full text-sm flex flex-col gap-1 p-2 rounded-lg "+(e.did===t?"bg-success text-white ml-auto":"bg-light-secondary dark:bg-dark-secondary"),children:[(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center text-xs",children:[e.did===t?(0,r.jsx)("span",{className:" text-primary",children:"Moi"}):(0,r.jsx)("span",{className:" text-primary dark:text-secondary",children:e.did}),(0,r.jsxs)("span",{className:"text-gray-300",children:[new Date(e.date).toLocaleDateString()," ",new Date(e.date).toLocaleTimeString()]})]}),(0,r.jsx)("span",{children:e.message})]})})))}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2  bg-light-secondary dark:bg-dark-secondary p-2 rounded-full",children:[(0,r.jsx)("input",{className:"w-full border-none focus:outline-none",placeholder:"Ecrire un message",value:a,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&d()}),(0,r.jsx)(l.B07,{className:`w-6 h-6 cursor-pointer hover:scale-110 ${(!a||0===a.length)&&"collapse"}`,onClick:d})]})]})}function u(){const[e,t]=(0,i.useState)(),[n,s]=(0,i.useState)(),[l,u]=(0,i.useState)();(0,i.useEffect)((()=>{(async()=>{const e=(0,o.DT)("doc_manager");t(await a.IdManager.fromStore(e))})(),s(localStorage.getItem("did")??void 0)}),[]);return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[e&&(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)("button",{className:"border-none bg-danger py-2 px-4 ml-auto rounded-lg text-white cursor-pointer",onClick:()=>{localStorage.removeItem("did"),s(void 0)},children:"Se d\xe9connecter"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.h,{profile:e,onEncryptionKey:e=>{u(e.toString("hex"))},onFail:e=>{},onData:e=>{},onSuccess:e=>{localStorage.setItem("did",e.did),s(e.did)}})})}),n&&(0,r.jsx)(d,{did:n})]})}const h={hide_table_of_contents:!0,sidebar_position:5},m="Nachrichten",f={id:"develop/try/demo",title:"Nachrichten",description:"Melden Sie sich mit Ihrer VaultysID-Identit\xe4t an.",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/develop/try/demo.mdx",sourceDirName:"develop/try",slug:"/develop/try/demo",permalink:"/de/docs/develop/try/demo",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{hide_table_of_contents:!0,sidebar_position:5},sidebar:"userguideSidebar",previous:{title:"Entschl\xfcsseln auf Abruf",permalink:"/de/docs/develop/try/decryptor"}},p={},g=[];function x(e){const t={h1:"h1",header:"header",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"nachrichten",children:"Nachrichten"})}),"\n",(0,r.jsx)(t.p,{children:"Melden Sie sich mit Ihrer VaultysID-Identit\xe4t an.\nIn diesem Beispiel erfolgt die Kommunikation zwischen Ihrem Telefon (VaultysID) und Ihrem PC (Browser) ohne Zwischenserver direkt von Peer zu Peer."}),"\n",(0,r.jsx)(t.p,{children:"Scannen Sie den QR-Code mit VaultysID, um sich anzumelden und mit dem Schreiben von Nachrichten zu beginnen. Stellen Sie sicher, dass Ihr Telefon im selben Netzwerk wie Ihr Computer ist."}),"\n",(0,r.jsx)(u,{})]})}function v(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},3866:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(20563),s=n(30758),a=n(72940),o=n(58359),i=n(86070);function c(e){let{className:t,fingerprint:n}=e;const r=(0,a.D)(n);return n.startsWith("00")?(0,i.jsx)(o.eWW,{className:t}):(0,i.jsx)(a.A,{...r,className:`${t} shrink-0`,shape:"circle",hairColorRandom:!0})}var l=n(84686).Buffer,d=n(65640);const u=e=>{let{profile:t,onEncryptionKey:a,onData:o,onSuccess:u,onFail:h,state:m}=e,f=(0,s.useRef)();const[p,g]=(0,s.useState)(),[x,v]=(0,s.useState)(!1),[j,y]=(0,s.useState)(!1),[w,S]=(0,s.useState)();let b=!1;return(0,s.useEffect)((()=>(b||(b=!0,(async()=>{const e=t.vaultysId?.toVersion(0);if(!e)return h&&h("no Id");const{PeerjsChannel:r}=n(35288);f.current=new r,a&&a(l.from(f.current.key,"hex"));const s=f.current?.start();g("https://wallet.vaultys.net#"+f.current?.getConnectionString()+"&protocol=p2p&service=auth&id="+e.id.toString("hex")),s?.then((async()=>{if(!f.current)return v(!0),h&&h("Could not open communication channel");f.current.conn?.on("data",o);try{const e=await(t?.acceptContact(f.current));return f.current?.close(),e?(y(!0),S(e.toVersion(1)),u&&u(e.toVersion(1))):(v(!0),h&&h("The handshake has failed!"))}catch(x){return v(!0),h&&h("The handshake has failed!")}}))})()),()=>{f.current?.close()})),[m]),(0,s.useEffect)((()=>{d.log(p)}),[p]),x?(0,i.jsx)("div",{children:"Error"}):w?(0,i.jsxs)("div",{className:"rounded-lg shadow-lg p-5 justify-center bg-white dark:bg-slate-900 flex-col flex gap-5 w-64 m-auto font-mono text-sm font-bold",children:[(0,i.jsx)(c,{fingerprint:w.toVersion(1).fingerprint,className:"border border-black border-solid w-24 h-24 m-auto shadow-lg"}),w.toVersion(1).fingerprint]}):p?(0,i.jsx)(r.vP,{text:p,className:"rounded-lg shadow-xl"}):void 0}},34654:()=>{},34149:()=>{},89780:()=>{},35129:()=>{},99926:()=>{},90124:()=>{},71220:()=>{},38854:()=>{},98308:()=>{}}]);